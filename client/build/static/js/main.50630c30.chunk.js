(window["webpackJsonpmagbelle-pay-slip"]=window["webpackJsonpmagbelle-pay-slip"]||[]).push([[0],{114:function(e){e.exports=JSON.parse('{"a":{"info":{"topLeft":[{"label":"Name of Employer","id":"nameOfEmployer","type":"string","initialValue":"Lim Ley Thin"},{"label":"Name of Employee","id":"nameOfEmployee","type":"string"},{"label":"I/C No.","id":"icNo","type":"string"}],"topRight":[{"label":"Salary Period","id":"salaryPeriod","type":"month"},{"label":"Date of Payment","id":"dateOfPayment","type":"date"}],"bottomLeft":[{"label":"Overtime Hours","id":"overtimeHours","type":"string"},{"label":"Mode of Payment","id":"modeOfPayment","type":"radio","choices":[{"label":"Cash","id":"cash"},{"label":"Cheque","id":"cheque"},{"label":"Bank Deposit","id":"bankDeposit"}]}],"cpfContribution":[{"label":"Employee CPF","id":"employeeCpf","type":"number"},{"label":"Employer CPF","id":"employerCpf","type":"number"},{"label":"Total CPF Contribution","id":"cpfContributionOutput","type":"auto","initialValue":"0.00","sumType":"subtotal"}]},"breakdown":{"earnings":[{"label":"Basic Pay","id":"basicPay","type":"number"},{"label":"Overtime Pay","id":"overtimePay","type":"number"},{"label":"Commission","id":"commission","type":"number"},{"label":"Allowances","id":"ratePerHour","type":"number"},{"label":"(A) Gross Pay","id":"earningsOutput","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"deductions":[{"label":"CPF","id":"employeeCpf","type":"number"},{"label":"Income Tax","id":"incomeTax","type":"number"},{"label":"Advance Loan","id":"advanceLoan","type":"number"},{"label":"(B) Total Deductions","id":"deductionsOutput","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"additions":[{"label":"Reimbursement","id":"reimbursement","type":"number"},{"label":"Bonus","id":"bonus","type":"number"},{"label":"(C) Total Additions","id":"additionsOutput","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"nett":[{"label":"Nett Payment (A-B+C)","id":"nettPayment","type":"auto","initialValue":"0.00","sumType":"total"}]},"footer":{"left":[{"label":"Approved By","id":"approvedBy","type":"string"}],"right":[{"label":"Employee\'s Signature","id":"employeesSignature","type":"string"}]}}}')},159:function(e,t,a){},234:function(e,t,a){e.exports=a(416)},238:function(e,t,a){},241:function(e,t){},243:function(e,t){},282:function(e,t){},283:function(e,t){},410:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),l=a(213),i=a.n(l),o=(a(238),a(87)),c=a(214),u=a(215),s=a(233),m=a(216),d=a(48),p=a(232),b=a(89),f=a(55),y=a(65),h=a(217),E=a.n(h);function g(e,t,a){var l,i=e.id,o=e.label,c=e.initialValue;switch(e.type){case"string":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:i},o)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{className:"input-field",id:i,name:i,type:"text",defaultValue:c||"",onChange:function(e){return t(i,e.target.value)}})));break;case"number":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:i},o)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{className:"input-field",id:i,name:i,type:"number",inputMode:"decimal",step:"0.01",onChange:function(e){var a=parseFloat(e.target.value).toFixed(2);t(i,a)}})));break;case"auto":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label ".concat(e.sumType)},o),r.a.createElement("div",{className:"output ".concat(e.sumType)},r.a.createElement("span",{id:i},a[i])));break;case"date":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:i},o)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{className:"input-field",id:i,name:i,type:"date",onChange:function(e){return t(i,e.target.value)}})));break;case"month":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:i},o)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{className:"input-field",id:i,name:i,type:"month",onChange:function(e){return t(i,e.target.value)}})));break;case"radio":l=r.a.createElement(n.Fragment,{key:i},r.a.createElement("div",{className:"label radio-label"},r.a.createElement("label",{htmlFor:i},o)),r.a.createElement("div",{className:"radio-choices"},e.choices.map(function(e,a){var n=e.id,l=e.label;return r.a.createElement("div",{key:n,className:"radio-choice"},r.a.createElement("input",{className:"radio-choice-field",type:"radio",id:n,name:i,value:n,onChange:function(e){return t(i,e.target.value)}}),r.a.createElement("label",{className:"radio-choice-label",htmlFor:n},l))})))}return l}a(159);var v=function(e){var t=e.info,a=e.setField,n=e.updateSubtotal,l=e.state;return Object.keys(t).map(function(e){var i=t[e];return r.a.createElement("section",{key:e,id:e,className:"infoTable",onChange:function(){"cpfContribution"===e&&n(e,!1)}},i.map(function(e){return g(e,a,l)}))})},O=function(e){var t=e.breakdown,a=e.setField,l=e.updateSubtotal,i=e.state;return r.a.createElement(n.Fragment,null,Object.keys(t).filter(function(e){return"nett"!==e}).map(function(e){var n=t[e];return r.a.createElement("section",{key:e,id:e,onChange:function(){return l(e,!0)}},r.a.createElement("div",{className:"header"},e),n.map(function(e){return g(e,a,i)}))}),r.a.createElement("section",{id:"final"},Object.keys(t).filter(function(e){return"nett"===e}).map(function(e){return t[e].map(function(e){return g(e,a,i)})})))},k=a(158),w=a(8);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var S={marginTop:4,marginBottom:4,marginLeft:8,marginRight:8},F={borderStyle:"solid",borderColor:"#6c6c6c",borderWidth:1,borderLeftWidth:0,borderTopWidth:0},P={borderStyle:"solid",borderColor:"#6c6c6c",borderWidth:1,borderRightWidth:0,borderBottomWidth:0},N={styles:w.g.create({body:{padding:"50px 45px"},headerContainer:{marginBottom:20,textAlign:"center",width:"100%"},addressContainer:{marginTop:8,marginBottom:4},companyName:{fontSize:19,fontWeight:"bold"},address:{fontSize:12,fontWeight:"bold",marginBottom:2},salarySlip:{fontSize:14,fontWeight:"bold",marginTop:8,marginBottom:8,marginLeft:0,marginRight:0},container:{flexDirection:"row",flexWrap:"wrap"},left:{marginRight:20,overflow:"hidden",width:"48%"},right:{overflow:"hidden",width:"48%"},bottom:{flex:"1 0 100%",width:"100%"},table:j({},F,{display:"table",width:"auto",marginBottom:16}),tableRow:{margin:"auto",flexDirection:"row"},infoLabelCol:j({},P,{width:"50%"}),infoLabelCell:j({},S,{fontSize:10,wordBreak:"break-word"}),infoInputCol:j({},P,{width:"50%"}),infoInputCell:j({},S,{fontSize:10,textAlign:"right"}),breakdownHeaderCol:j({},P,{width:"100%"}),breakdownHeaderCell:j({},S,{fontSize:10,textAlign:"center"}),breakdownInputLabelCol:j({},P,{width:"75%"}),breakdownInputLabelCell:j({},S,{fontSize:10}),breakdownInputCol:j({},P,{width:"25%"}),breakdownInputCell:j({},S,{fontSize:10,position:"relative",textAlign:"right"}),breakdownOutputLabelCol:j({},P,{backgroundColor:"#eee",width:"75%"}),breakdownOutputLabelCell:j({},S,{fontSize:10}),breakdownOutputCol:j({},P,{backgroundColor:"#eee",width:"25%"}),breakdownOutputCell:j({},S,{fontSize:10,position:"relative",textAlign:"right"}),infoLabelColNett:j({},P,{backgroundColor:"#c6c6c6",width:"75%"}),infoInputColNett:j({},P,{backgroundColor:"#c6c6c6",width:"25%"}),footerCol:j({},P,{width:"50%"}),footerCell:j({},S,{fontSize:10,paddingBottom:38,wordBreak:"break-word"}),dollarSign:{left:0,position:"absolute",textAlign:"left",width:"50%"},numericValue:{position:"absolute",right:0,textAlign:"right",width:"50%"},stringValue:{position:"absolute",textAlign:"left",width:"100%"}})},x=(a(410),N.styles),L=x.infoLabelCol,T=x.infoInputCol,B=x.body,I=x.headerContainer,A=x.companyName,D=x.addressContainer,V=x.address,H=x.salarySlip,z=x.container,R=x.left,W=x.right,J=x.bottom,_=x.breakdownHeaderCol,M=x.breakdownHeaderCell,U=x.breakdownInputLabelCol,$=x.breakdownInputLabelCell,q=x.breakdownInputCol,G=x.breakdownInputCell,Y=x.breakdownOutputLabelCol,K=x.breakdownOutputLabelCell,X=x.breakdownOutputCol,Q=x.breakdownOutputCell,Z=x.infoLabelColNett,ee=x.infoLabelCell,te=x.infoInputColNett,ae=x.infoInputCell,ne=x.table,re=x.tableRow,le=x.footerCol,ie=x.footerCell,oe=x.dollarSign,ce=x.numericValue,ue=x.stringValue;w.c.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"});var se=function(e){var t=e.id,a=e.label,l=e.state,i=e.displayDollarSign;return r.a.createElement(w.i,{style:re,key:t},r.a.createElement(w.i,{style:L},r.a.createElement(w.i,{style:ee},r.a.createElement(w.h,null,a))),r.a.createElement(w.i,{style:T},r.a.createElement(w.i,{style:ae},i?r.a.createElement(n.Fragment,null,r.a.createElement(w.h,{style:oe},"$"),r.a.createElement(w.h,{style:ce},l[t])):r.a.createElement(w.h,{style:ue},l[t]))))},me=function(){return r.a.createElement(w.i,{style:I},r.a.createElement(w.h,{style:A},"Magbelle Hair Salon"),r.a.createElement(w.i,{style:D},r.a.createElement(w.h,{style:V},"18 Yishun Avenue 9"),r.a.createElement(w.h,{style:V},"Junction Nine #02-49"),r.a.createElement(w.h,{style:V},"Singapore 768897")),r.a.createElement(w.h,{style:H},"Salary Slip"))},de=function(e){var t=e.info,a=e.state;return r.a.createElement(n.Fragment,null,r.a.createElement(w.i,{style:R},Object.keys(t).filter(function(e){return"topLeft"===e||"bottomLeft"===e}).map(function(e){var n=t[e];return r.a.createElement(w.i,{style:ne,key:e},n.map(function(e){return r.a.createElement(se,Object.assign({key:e.id,state:a},e))}))})),r.a.createElement(w.i,{style:W},Object.keys(t).filter(function(e){return"topRight"===e||"cpfContribution"===e}).map(function(e){var n=t[e];return r.a.createElement(w.i,{style:ne,key:e},n.map(function(t){return r.a.createElement(se,Object.assign({key:t.id,state:a},t,{displayDollarSign:"cpfContribution"===e}))}))})))},pe=function(e){var t=e.breakdown,a=e.state;return Object.keys(t).filter(function(e){return"nett"!==e}).map(function(e){return r.a.createElement(w.i,{style:ne,key:"".concat(e,"-table")},r.a.createElement(w.i,{style:re},r.a.createElement(w.i,{style:_},r.a.createElement(w.i,{style:M},r.a.createElement(w.h,null,e.charAt(0).toUpperCase(),e.substr(1))))),t[e].filter(function(e){return"auto"!==e.type}).map(function(e){var t=e.id,n=e.label;return r.a.createElement(w.i,{style:re,key:t},r.a.createElement(w.i,{style:U},r.a.createElement(w.i,{style:$},r.a.createElement(w.h,null,n))),r.a.createElement(w.i,{style:q},r.a.createElement(w.i,{style:G},r.a.createElement(w.h,{style:oe},"$"),r.a.createElement(w.h,{style:ce},a[t]))))}),t[e].filter(function(e){return"auto"===e.type}).map(function(e){var t=e.id,n=e.label;return r.a.createElement(w.i,{style:re,key:t},r.a.createElement(w.i,{style:Y},r.a.createElement(w.i,{style:K},r.a.createElement(w.h,null,n))),r.a.createElement(w.i,{style:X},r.a.createElement(w.i,{style:Q},r.a.createElement(w.h,{style:oe},"$"),r.a.createElement(w.h,{style:ce},a[t]))))}))})},be=function(e){var t=e.breakdown,a=e.state,n=t.nett[0],l=n.id,i=n.label;return r.a.createElement(w.i,{style:ne},r.a.createElement(w.i,{style:re,key:l},r.a.createElement(w.i,{style:Z},r.a.createElement(w.i,{style:ee},r.a.createElement(w.h,null,i))),r.a.createElement(w.i,{style:te},r.a.createElement(w.i,{style:ae},r.a.createElement(w.h,{style:oe},"$"),r.a.createElement(w.h,{style:ce},a[l])))))},fe=function(e){var t=e.footer;return r.a.createElement(w.i,{style:ne},r.a.createElement(w.i,{style:re},Object.keys(t).map(function(e){return t[e][0]}).map(function(e){var t=e.id,a=e.label;return r.a.createElement(w.i,{style:le,key:t},r.a.createElement(w.i,{style:ie},r.a.createElement(w.h,null,a)))})))},ye=function(e){var t=e.info,a=e.breakdown,n=e.footer,l=e.state;return r.a.createElement(w.b,null,r.a.createElement(w.f,{style:B},r.a.createElement(me,null),r.a.createElement(w.i,{style:z},r.a.createElement(de,{info:t,state:l}),r.a.createElement(w.i,{style:J},r.a.createElement(pe,{breakdown:a,state:l}),r.a.createElement(be,{breakdown:a,state:l}),r.a.createElement(fe,{footer:n})))))};var he=function(e){var t,a,l=e.pdfFileName,i=Object(b.a)(e,["pdfFileName"]),o=Object(n.useState)(null),c=Object(k.a)(o,2),u=c[0],s=c[1],m=Object(n.useState)(null),d=Object(k.a)(m,2),p=d[0],f=d[1],y=function(){f(!1),fetch("".concat("http://localhost:8001","/email"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({dataUri:u,pdfFileName:l,state:i.state})}).then(function(e){return e.json()}).then(function(e){var t=e.res,a=!t.rejected.length&&!!t.accepted.length;f(a)}).catch(console.error)};return r.a.createElement(w.a,{document:r.a.createElement(ye,i)},function(e){var n=e.blob,l=e.url,i=e.loading,o=e.error;return console.log({blob:n,url:l,loading:i,error:o}),n&&function(e,t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)}(n,s),o||!i&&!l?t=r.a.createElement("p",{className:"exportText"},"Error"):o||i||!l?t=r.a.createElement("p",{className:"exportText"},"Loading"):(a=null===p?"Email PDF":p?"Sent!":"Sending...",t=r.a.createElement("button",{onClick:y,className:"exportButton"},a)),t})},Ee=function(e){var t=e.state,a=[t.nameOfEmployee,t.salaryPeriod].join("_").replace(" ","-");return r.a.createElement("div",{style:{width:"100%",height:"100%",padding:"1em"}},r.a.createElement(w.e,{width:"100%",height:"85%"},r.a.createElement(ye,e)),r.a.createElement("section",{style:{width:"100%",height:"15%",paddingTop:"32px"},id:"nextSteps"},r.a.createElement("div",{className:"formButton"},r.a.createElement(y.b,{to:"/payslip/new"},"Back")),r.a.createElement("div",{className:"formButton"},r.a.createElement(he,Object.assign({pdfFileName:a},e)))))},ge=(a(415),a(114));function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach(function(t){Object(o.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ke=ge.a.info,we=ge.a.breakdown,Ce=ge.a.footer,je=ke.bottomLeft.filter(function(e){return"modeOfPayment"===e.id})[0].choices;function Se(e){var t=e.loggedIn,a=e.children,n=Object(b.a)(e,["loggedIn","children"]);return r.a.createElement(f.b,Object.assign({},n,{render:function(e){var n=e.location;return t?a:r.a.createElement(f.a,{to:{pathname:"/",state:{from:n}},push:!0})}}))}var Fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={loggedIn:!!E.a.get("magbelle_logged_in")},a.fields={},[ke,we].map(function(e){return Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"auto"===e.type}).map(function(e){return a.state[e.id]=e.initialValue?e.initialValue:0})}),[ke,we].map(function(e){return Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"number"===e.type}).map(function(e){return a.fields[e.id]=e.initialValue?e.initialValue:parseFloat(0).toFixed(2)})}),[ke,we].map(function(e){return Object.keys(e).map(function(t){return e[t]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"number"!==e.type&&"auto"!==e.type}).map(function(e){return a.fields[e.id]=e.initialValue?e.initialValue:""})}),a.setField=a.setField.bind(Object(d.a)(a)),a.updateSubtotal=a.updateSubtotal.bind(Object(d.a)(a)),a.updateTotal=a.updateTotal.bind(Object(d.a)(a)),a.renderHomepage=a.renderHomepage.bind(Object(d.a)(a)),a.renderPayslip=a.renderPayslip.bind(Object(d.a)(a)),a.renderExport=a.renderExport.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"setField",value:function(e,t){this.fields[e]=t}},{key:"updateTotal",value:function(){var e=this.state,t=e.earningsOutput,a=e.deductionsOutput,n=e.additionsOutput,r=parseFloat(t)-parseFloat(a)+parseFloat(n);this.setState({nettPayment:parseFloat(r).toFixed(2)})}},{key:"updateSubtotal",value:function(e,t){var a=this;if(e){var n="".concat(e,"Output"),r=(we[e]||ke[e]).filter(function(e){return"auto"!==e.type}).map(function(e){return e.id}),l=Object.keys(this.fields).filter(function(e){return r.includes(e)}).reduce(function(e,t){return parseFloat(e)+parseFloat(a.fields[t])},0);this.setState(Object(o.a)({},n,parseFloat(l).toFixed(2)),t?this.updateTotal:null)}}},{key:"renderHomepage",value:function(){var e;return e=this.state.loggedIn?r.a.createElement(n.Fragment,null,r.a.createElement(y.b,{to:"/payslip/new/",className:"button"},"Create new pay slip")):r.a.createElement("a",{href:"".concat("http://localhost:8001","/login"),className:"button"},"Login"),r.a.createElement("div",{className:"homepageContainer"},r.a.createElement("h2",{style:{marginTop:0,fontSize:"1.7em"}},"Magbelle Hair Salon",r.a.createElement("br",null),"Pay Slip Creator"),e)}},{key:"renderPayslip",value:function(){return r.a.createElement("div",{id:"main"},r.a.createElement("h1",{className:"title"},"Create new pay slip"),r.a.createElement(v,{info:ke,setField:this.setField,updateSubtotal:this.updateSubtotal,state:this.state}),r.a.createElement(O,{breakdown:we,setField:this.setField,updateSubtotal:this.updateSubtotal,state:this.state}),r.a.createElement("section",{id:"nextSteps"},r.a.createElement("div",{className:"formButton"},r.a.createElement(y.b,{to:"/"},"Back")),r.a.createElement("div",{className:"formButton",id:"generatePdf"},r.a.createElement(y.b,{to:"/payslip/export"},"Generate PDF"))))}},{key:"renderExport",value:function(){return r.a.createElement(Ee,{info:ke,breakdown:we,footer:Ce,state:this.outputForPdf})}},{key:"render",value:function(){var e=this.state.loggedIn;return r.a.createElement(y.a,null,r.a.createElement(f.b,{path:"/",exact:!0,component:this.renderHomepage}),r.a.createElement(Se,{loggedIn:e,path:"/payslip/new/"},this.renderPayslip()),r.a.createElement(Se,{loggedIn:e,path:"/payslip/export/"},this.renderExport()))}},{key:"outputForPdf",get:function(){var e=this,t=Oe({},this.state,{},this.fields);return t=Oe({},t,{modeOfPayment:this.fields.modeOfPayment?je.filter(function(t){return t.id===e.fields.modeOfPayment})[0].label:""})}}]),t}(n.Component);i.a.render(r.a.createElement(Fe,null),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.50630c30.chunk.js.map