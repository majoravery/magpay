(this["webpackJsonpmagbelle-pay-slip"]=this["webpackJsonpmagbelle-pay-slip"]||[]).push([[0],{238:function(e,t,a){e.exports=a(432)},24:function(e){e.exports=JSON.parse('{"c":{"particulars":[{"label":"Name of Employer","id":"nameOfEmployer","type":"string","initialValue":"Lim Ley Thin"},{"label":"Name of Employee","id":"nameOfEmployee","type":"string"},{"label":"I/C No.","id":"icNo","type":"string"}],"duration":[{"label":"Salary Period","id":"salaryPeriod","type":"month"},{"label":"Date of Payment","id":"dateOfPayment","type":"date"}],"payment":[{"label":"Overtime Hours","id":"overtimeHours","type":"string"},{"label":"Mode of Payment","id":"modeOfPayment","type":"radio","choices":[{"label":"Cash","id":"cash"},{"label":"Cheque","id":"cheque"},{"label":"Bank Deposit","id":"bankDeposit"}]}],"cpf":[{"label":"Employee CPF","id":"employeeCpf","type":"number","sumGroupId":"cpf"},{"label":"Employer CPF","id":"employerCpf","type":"number","sumGroupId":"cpf"},{"label":"Total CPF Contribution","id":"cpf","type":"auto","initialValue":"0.00","sumType":"subtotal"}]},"a":{"earnings":[{"label":"Basic Pay","id":"basicPay","type":"number","sumGroupId":"earnings"},{"label":"Overtime Pay","id":"overtimePay","type":"number","sumGroupId":"earnings"},{"label":"Commission","id":"commission","type":"number","sumGroupId":"earnings"},{"label":"Allowances","id":"ratePerHour","type":"number","sumGroupId":"earnings"},{"label":"(A) Gross Pay","id":"earnings","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"deductions":[{"//to-do":"sync this with employee cpf above","label":"CPF","id":"cpf","type":"number","sumGroupId":"deductions"},{"label":"Income Tax","id":"incomeTax","type":"number","sumGroupId":"deductions"},{"label":"Advance Loan","id":"advanceLoan","type":"number","sumGroupId":"deductions"},{"label":"(B) Total Deductions","id":"deductions","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"additions":[{"label":"Reimbursement","id":"reimbursement","type":"number","sumGroupId":"additions"},{"label":"Bonus","id":"bonus","type":"number","sumGroupId":"additions"},{"label":"(C) Total Additions","id":"additions","type":"auto","initialValue":"0.00","sumType":"subtotal"}],"nett":[{"label":"Nett Payment (A-B+C)","id":"breakdown","type":"auto","initialValue":"0.00","sumType":"total"}]},"b":{"left":{"label":"Approved By","id":"approvedBy","type":"string"},"right":{"label":"Employee\'s Signature","id":"employeesSignature","type":"string"}}}')},243:function(e,t,a){},244:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},257:function(e,t){},259:function(e,t){},299:function(e,t){},300:function(e,t){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(222),i=a.n(l),o=(a(243),a(28)),c=a(237),s=a(60),u=a(30),m=(a(244),function(e){var t=e.title,a=e.disableBackButton,l=Object(n.useState)(!1),i=Object(u.a)(l,2),c=i[0],m=i[1],d=Object(s.f)();return r.a.createElement(n.Fragment,null,r.a.createElement("article",{className:"header-header"},r.a.createElement("div",{className:"header-back-button"},!a&&r.a.createElement("button",{className:"go-back-button",onClick:function(){return d.goBack()}},r.a.createElement("span",null))),r.a.createElement("div",{className:"header-title"},t),r.a.createElement("div",{className:"header-menu-button"},r.a.createElement("button",{className:"open-menu-button",onClick:function(){return m(!0)}},r.a.createElement("span",null)))),r.a.createElement("div",{className:"menu".concat(c?"":" hidden")},r.a.createElement("button",{className:"close-menu-button",onClick:function(){return m(!1)}},r.a.createElement("span",null)),r.a.createElement("ul",{className:"menu-items"},r.a.createElement("li",{className:"menu-item"},r.a.createElement(o.b,{to:"/home"},"Home")),r.a.createElement("li",{className:"menu-item"},r.a.createElement(o.b,{to:"/privacy"},"Privacy policy")),r.a.createElement("hr",{className:"menu-separator"}),r.a.createElement("li",{className:"menu-item disabled"},"Change language")),r.a.createElement("div",{className:"logout-area"},r.a.createElement("a",{href:"".concat("/api","/logout"),className:"logout"},"Logout"))))});m.defaultProps={backButton:!1};var d=m,p=(a(249),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(d,{title:"Home",disableBackButton:!0}),r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home-prompt"},r.a.createElement("h2",null,"Hi ","Avery","!"),r.a.createElement("p",null,"What would you like to do?")),r.a.createElement("div",{className:"home-actions"},r.a.createElement(o.b,{to:"/payslip/new/",className:"button"},"Create new pay slip"),r.a.createElement(o.b,{to:"/",className:"button disabled"},"Create pay slip from template"))))}),f=(a(250),[["#cc2200","#03698f"],["#372772","#2E0F15"],["#618bff","#fbff00"],["#09814A","#ff8c00"]]),b=function(e){var t=document.documentElement;return Object(n.useEffect)((function(){var e=Object(u.a)(f[Math.floor(Math.random()*f.length)],2),a=e[0],n=e[1];t.style.setProperty("--splash-primary-colour",a),t.style.setProperty("--splash-secondary-colour",n)}),[t.style]),r.a.createElement("div",{className:"splash"},r.a.createElement("div",{className:"splash-bgs"},r.a.createElement("div",{className:"splash-bg bg-one"}),r.a.createElement("div",{className:"splash-bg bg-two"}),r.a.createElement("div",{className:"splash-bg bg-three"})),r.a.createElement("div",{className:"splash-actions"},r.a.createElement("h1",{className:"splash-title"},"Magbelle Hair Salon Pay Slip Creator"),r.a.createElement("a",{href:"".concat("/api","/login"),className:"button splash-button"},"Login")))},y=(a(73),function(e){var t=e.className,a=e.id,n=e.label,l=e.sumType,i=e.value,o=i;return"number"===typeof i&&(o=parseFloat(i).toFixed(2)),r.a.createElement("div",{className:"readonly ".concat(t),"data-type":l},r.a.createElement("div",{className:"label"},n),r.a.createElement("div",{className:"output"},r.a.createElement("span",{id:a},o)))});y.defaultProps={className:"",sumGroup:null,value:null};var g=y,h=function(e){var t=e.className,a=e.id,n=e.label,l=e.sumGroup,i=e.initialValue,o=e.onChange;return r.a.createElement("div",{className:"datepicker ".concat(t)},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:a},n)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{id:a,name:a,type:"date",defaultValue:i,onChange:function(e){return o(a,e.target.value,l)}})))};h.defaultProps={className:"",sumGroup:null,initialValue:null};var E=h,v=function(e){var t=e.className,a=e.id,n=e.label,l=e.sumGroup,i=e.initialValue,o=e.onChange;return r.a.createElement("div",{className:"monthpicker ".concat(t)},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:a},n)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{id:a,name:a,type:"month",defaultValue:i,onChange:function(e){return o(a,e.target.value,l)}})))};v.defaultProps={className:"",sumGroup:null,initialValue:null};var w=v,N=function(e){var t=e.className,a=e.id,n=e.label,l=e.sumGroup,i=e.initialValue,o=e.onChange;return r.a.createElement("div",{className:"numeral ".concat(t)},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:a},n)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{id:a,name:a,type:"number",defaultValue:i,inputMode:"decimal",step:"0.01",onChange:function(e){var t=parseFloat(e.target.value).toFixed(2);o(a,t,l)}})))};N.defaultProps={className:"",sumGroup:null,initialValue:null};var O=N,j=function(e){var t=e.className,a=e.id,n=e.label,l=e.sumGroup,i=(e.initialValue,e.choices),o=e.onChange;return r.a.createElement("div",{className:"radio ".concat(t)},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:a},n)),r.a.createElement("div",{className:"options"},i.map((function(e,t){var n=e.id,i=e.label;return r.a.createElement("div",{key:n,className:"option"},r.a.createElement("input",{type:"radio",id:n,name:a,value:n,onChange:function(e){return o(a,e.target.value,l)}}),r.a.createElement("label",{htmlFor:n},i))}))))};j.defaultProps={className:"",sumGroup:null,initialValue:null};var k=j,I=function(e){var t=e.className,a=e.id,n=e.label,l=e.sumGroup,i=e.initialValue,o=e.onChange;return r.a.createElement("div",{className:"text ".concat(t)},r.a.createElement("div",{className:"label"},r.a.createElement("label",{htmlFor:a},n)),r.a.createElement("div",{className:"input"},r.a.createElement("input",{id:a,name:a,type:"text",defaultValue:i,onChange:function(e){return o(a,e.target.value,l)}})))};I.defaultProps={className:"",sumGroup:null,initialValue:null};var C=I,S=a(121),x=a(48),P=a(81),F=a(82),B=a(87),G=a(83),T=a(67),L=a(86),W=a(24),U={},A=Object(n.createContext)(U),V=A.Provider,D=A.Consumer,R=["earnings","deductions","additions"],M=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(B.a)(this,Object(G.a)(t).call(this,e))).state=Object(x.a)({},U),a.setField=a.setField.bind(Object(T.a)(a)),a}return Object(L.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.setInitialState(),this.createSumGroupObject()}},{key:"componentDidUpdate",value:function(e,t,a){var n=this,r=Object.keys(t).filter((function(e){return t[e]!==n.state[e]}))[0];if(r){var l=this.calculateSumGroups(r),i=Object(u.a)(l,2),o=i[0],c=i[1];o&&this.setState(Object(x.a)({},c))}}},{key:"setInitialState",value:function(){var e=[];[W.c,W.a].forEach((function(t){Object.values(t).forEach((function(t){t.forEach((function(t){e[t.id]=t.initialValue?t.initialValue:null}))}))})),this.setState(Object(x.a)({},e))}},{key:"createSumGroupObject",value:function(){var e={};[W.c,W.a].map((function(t){return Object.values(t).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.sumGroupId})).forEach((function(t){e[t.sumGroupId]?e[t.sumGroupId].push(t.id):e[t.sumGroupId]=[t.id]}))})),this.sumGroups=e}},{key:"calculateSumGroups",value:function(e){var t=this,a=Object.keys(this.sumGroups).filter((function(a){return t.sumGroups[a].includes(e)})),n=!1,r={},l=!1;if(a.forEach((function(e){var a=t.sumGroups[e].reduce((function(e,a){var n=t.state[a]&&!isNaN(t.state[a])?parseFloat(t.state[a]):0;return parseFloat(e)+n}),0);R.includes(e)&&!l&&(l=!0),t.state[e]!==r[e]&&(r[e]=a,n=!0)})),l){var i=R.map((function(e){return r[e]?r[e]:t.state[e]}));r.breakdown=parseFloat(i[0])-parseFloat(i[1])+parseFloat(i[2])}return[n,r]}},{key:"setField",value:function(e,t){this.setState(Object(S.a)({},e,t))}},{key:"render",value:function(){var e=this.props.children,t=Object(x.a)({},this.state,{setField:this.setField});return r.a.createElement(V,{value:t},e)}}]),t}(n.Component),z=function(e){return r.a.createElement(D,{key:e.id},(function(t){var a=t.setField,n=t[e.id];switch(e.type){case"auto":return r.a.createElement(g,Object.assign({value:n},e));case"date":return r.a.createElement(E,Object.assign({onChange:a},e));case"month":return r.a.createElement(w,Object.assign({onChange:a},e));case"number":return r.a.createElement(O,Object.assign({onChange:a},e));case"radio":return r.a.createElement(k,Object.assign({onChange:a},e));case"string":return r.a.createElement(C,Object.assign({onChange:a},e))}}))},H=(a(251),function(){return Object.keys(W.c).map((function(e){return r.a.createElement("section",{key:e,id:e,className:"form-info"},W.c[e].map(z))}))}),q=(a(252),W.a.earnings),J=W.a.deductions,Y=W.a.additions,_=W.a.nett,$=function(){var e={earnings:q,deductions:J,additions:Y};return r.a.createElement(n.Fragment,null,Object.keys(e).map((function(t){return r.a.createElement("section",{key:t,id:t,className:"form-breakdown"},r.a.createElement("div",{className:"form-section-header"},t),e[t].map(z))})),r.a.createElement("section",{id:"nett",className:"form-breakdown"},Object.values(_).map(z)))},K=(a(253),function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(d,{title:"New payslip"}),r.a.createElement("div",{className:"new-payslip"},r.a.createElement("div",{className:"new-payslip-form"},r.a.createElement(H,null),r.a.createElement($,null)),r.a.createElement("div",{className:"new-payslip-footer"},r.a.createElement(o.b,{to:"/payslip/preview",className:"button continue-button"},"Continue"))))}),X=(a(254),function(e){function t(){var e;return Object(P.a)(this,t),(e=Object(B.a)(this,Object(G.a)(t).call(this))).state={pdfDisplayed:!1},e}return Object(L.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(d,{title:"Preview payslip"}),r.a.createElement("div",{className:"preview-payslip"},r.a.createElement("div",{className:"preview-payslip-box"},"PDF HERE"),r.a.createElement("div",{className:"preview-payslip-footer"},r.a.createElement("a",{href:"/",className:"button save-as-template-button disabled"},"Save as template"),r.a.createElement(o.b,{to:"/payslip/email",className:"button email-payslip-button"},"Email PDF"))))}}]),t}(n.Component)),Q=a(5),Z=Q.e.create({marginBottom:20,textAlign:"center",width:"100%"}),ee=Q.e.create({fontSize:19,marginBottom:4}),te=Q.e.create({marginTop:8,marginBottom:4}),ae=Q.e.create({fontSize:12,marginBottom:2}),ne=Q.e.create({fontSize:14,marginTop:8,marginBottom:4}),re=function(){return r.a.createElement(Q.g,{style:Z},r.a.createElement(Q.f,{style:ee},"Magbelle Hair Salon"),r.a.createElement(Q.g,{style:te},r.a.createElement(Q.f,{style:ae},"18 Yishun Avenue 9"),r.a.createElement(Q.f,{style:ae},"Junction Nine #02-49"),r.a.createElement(Q.f,{style:ae},"Singapore 768897")),r.a.createElement(Q.f,{style:ne},"Salary Slip"))},le=["particulars","payment"],ie=["duration","cpf"],oe=Q.e.create({flexDirection:"row",flexWrap:"wrap"}),ce=Q.e.create({marginRight:20,overflow:"hidden",width:"48%"}),se=Q.e.create({overflow:"hidden",width:"48%"}),ue=Q.e.create({borderBottomWidth:1,borderRightWidth:1,borderColor:"#6c6c6c",borderStyle:"solid",display:"table",marginBottom:16,width:"auto"}),me=Q.e.create({flexDirection:"row",margin:"auto"}),de=Q.e.create({borderStyle:"solid",borderColor:"#6c6c6c",borderLeftWidth:1,borderTopWidth:1,width:"50%"}),pe=Q.e.create({marginTop:4,marginBottom:4,marginLeft:8,marginRight:8,fontSize:10,wordBreak:"break-word"}),fe=Q.e.create({marginTop:4,marginBottom:4,marginLeft:8,marginRight:8,fontSize:10,textAlign:"right"}),be=Q.e.create({left:0,position:"absolute",textAlign:"left",width:"50%"}),ye=Q.e.create({position:"absolute",right:0,textAlign:"right",width:"50%"}),ge=Q.e.create({position:"absolute",textAlign:"left",width:"100%"}),he=function(e){return Object.keys(W.c).filter((function(t){return e.includes(t)})).map((function(e){var t=W.c[e],a="cpf"===e;return r.a.createElement(Q.g,{style:ue,key:e},t.map((function(e){var t=e.id,l=e.label;return r.a.createElement(D,{key:t},(function(e){var i=e[t];return r.a.createElement(Q.g,{style:me},r.a.createElement(Q.g,{style:de},r.a.createElement(Q.g,{style:pe},r.a.createElement(Q.f,null,l))),r.a.createElement(Q.g,{style:de},r.a.createElement(Q.g,{style:fe},a?r.a.createElement(n.Fragment,null,r.a.createElement(Q.f,{style:be},"$"),r.a.createElement(Q.f,{style:ye},i)):r.a.createElement(Q.f,{style:ge},i))))}))})))}))},Ee=function(){return r.a.createElement(Q.g,{style:oe},r.a.createElement(Q.g,{style:ce},he(le)),r.a.createElement(Q.g,{style:se},he(ie)))},ve=Q.e.create({borderBottomWidth:1,borderRightWidth:1,borderColor:"#6c6c6c",borderStyle:"solid",display:"table",marginBottom:16,width:"auto"}),we=Q.e.create({flexDirection:"row",margin:"auto"}),Ne=Q.e.create(Object(x.a)({},we,{backgroundColor:"#eee"})),Oe=Q.e.create({borderColor:"#6c6c6c",borderLeftWidth:1,borderStyle:"solid",borderTopWidth:1,width:"100%"}),je=Q.e.create({fontSize:10,marginBottom:4,marginLeft:8,marginRight:8,marginTop:4,textAlign:"center"}),ke=Q.e.create({borderColor:"#6c6c6c",borderLeftWidth:1,borderStyle:"solid",borderTopWidth:1,width:"75%"}),Ie=Q.e.create({fontSize:10,marginBottom:4,marginLeft:8,marginRight:8,marginTop:4}),Ce=Q.e.create({borderColor:"#6c6c6c",borderLeftWidth:1,borderStyle:"solid",borderTopWidth:1,width:"25%"}),Se=Q.e.create({fontSize:10,marginBottom:4,marginLeft:8,marginRight:8,marginTop:4,position:"relative",textAlign:"right"}),xe=Q.e.create({left:0,position:"absolute",textAlign:"left",width:"50%"}),Pe=Q.e.create({position:"absolute",right:0,textAlign:"right",width:"50%"}),Fe=function(){return Object.keys(W.a).filter((function(e){return"nett"!==e})).map((function(e){return r.a.createElement(Q.g,{style:ve,key:"".concat(e,"-table")},r.a.createElement(Q.g,{style:we},r.a.createElement(Q.g,{style:Oe},r.a.createElement(Q.g,{style:je},r.a.createElement(Q.f,null,e.charAt(0).toUpperCase(),e.substr(1))))),W.a[e].filter((function(e){return"auto"!==e.type})).map((function(e){var t=e.id,a=e.label;return r.a.createElement(D,{key:t},(function(e){var n=e[t];return r.a.createElement(Q.g,{style:we},r.a.createElement(Q.g,{style:ke},r.a.createElement(Q.g,{style:Ie},r.a.createElement(Q.f,null,a))),r.a.createElement(Q.g,{style:Ce},r.a.createElement(Q.g,{style:Se},r.a.createElement(Q.f,{style:xe},"$"),r.a.createElement(Q.f,{style:Pe},n))))}))})),W.a[e].filter((function(e){return"auto"===e.type})).map((function(e){var t=e.id,a=e.label;return r.a.createElement(D,{key:t},(function(e){var n=e[t];return r.a.createElement(Q.g,{style:Ne},r.a.createElement(Q.g,{style:ke},r.a.createElement(Q.g,{style:Ie},r.a.createElement(Q.f,null,a))),r.a.createElement(Q.g,{style:Ce},r.a.createElement(Q.g,{style:Se},r.a.createElement(Q.f,{style:xe},"$"),r.a.createElement(Q.f,{style:Pe},n))))}))})))}))},Be=Q.e.create({borderBottomWidth:1,borderRightWidth:1,borderColor:"#6c6c6c",borderStyle:"solid",display:"table",marginBottom:16,width:"auto"}),Ge=Q.e.create({flexDirection:"row",margin:"auto"}),Te=Q.e.create({borderLeftWidth:1,borderTopWidth:1,borderColor:"#6c6c6c",borderStyle:"solid",width:"50%"}),Le=Q.e.create({fontSize:10,marginBottom:4,marginLeft:8,marginRight:8,marginTop:4,paddingBottom:38,wordBreak:"break-word"}),We=function(){return r.a.createElement(Q.g,{style:Be},r.a.createElement(Q.g,{style:Ge},Object.values(W.b).map((function(e){var t=e.id,a=e.label;return r.a.createElement(Q.g,{style:Te,key:t},r.a.createElement(Q.g,{style:Le},r.a.createElement(Q.f,null,a)))}))))};a(429);Q.c.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"});var Ue=Q.e.create({padding:"50px 45px"}),Ae=function(){return r.a.createElement(Q.b,null,r.a.createElement(Q.d,{style:Ue},r.a.createElement(re,null),r.a.createElement(Ee,null),r.a.createElement(Fe,null),r.a.createElement(We,null)))},Ve=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(null),c=Object(u.a)(o,2),m=c[0],p=c[1],f=Object(n.useState)(!1),b=Object(u.a)(f,2),y=b[0],g=b[1],h=Object(n.useState)(!1),E=Object(u.a)(h,2),v=E[0],w=E[1],N=Object(n.useState)("vivianaverylim@gmail.com"),O=Object(u.a)(N,2),j=O[0],k=O[1],I=Object(n.useState)("New pay slip from Magpay"),C=Object(u.a)(I,2),S=C[0],x=C[1],P=Object(n.useState)(""),F=Object(u.a)(P,2),B=F[0],G=F[1],T=Object(n.useRef)(null),L=Object(n.useRef)(null),W=Object(n.useRef)(null),U=function(e){return k(e.target.value)},A=function(e){return x(e.target.value)},V=function(e){return G(e.target.value)};function R(){g(!0),fetch("".concat("/api","/email"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({dataUri:m,recipient:j,subject:S,message:B})}).then((function(e){return e.json()})).then((function(e){var t=e.success,a=e.message;t||console.error("Error: ".concat(a)),g(!1),w(t)})).catch(console.error)}return Object(n.useEffect)((function(){fetch("".concat("/api","/user")).then((function(e){return e.json()})).then((function(e){return k(e.email)}))}),[]),v?r.a.createElement(s.a,{to:"/payslip/sent?recipient=".concat(j)}):r.a.createElement(D,null,(function(e){var t=e.nameOfEmployee,a=e.salaryPeriod,o=!l||!!y,c=t||"[employee name]";return r.a.createElement(n.Fragment,null,!l&&r.a.createElement(Q.a,{document:r.a.createElement(Ae,null)},(function(e){var t=e.blob,a=e.url,n=e.loading,r=e.error;return t&&function(e,t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)}(t,p),r||n||!a&&!t||i(!0),null})),r.a.createElement(d,{title:"Email payslip"}),r.a.createElement("div",{className:"email-payslip"},r.a.createElement("div",{className:"email-payslip-box"},r.a.createElement("div",{className:"email-payslip-field"},r.a.createElement("label",{htmlFor:"recipient"},"Recipient Address"),r.a.createElement("input",{id:"recipient",name:"recipient",type:"text",value:j,ref:T,onChange:U})),r.a.createElement("div",{className:"email-payslip-field"},r.a.createElement("label",{htmlFor:"subject"},"Subject"),r.a.createElement("input",{id:"subject",name:"subject",type:"text",value:S,ref:L,onChange:A})),r.a.createElement("div",{className:"email-payslip-field"},r.a.createElement("label",{htmlFor:"message"},"Message"),r.a.createElement("textarea",{id:"message",name:"message",type:"text",rows:"8",placeholder:"Type message here",value:B,ref:W,onChange:V})),r.a.createElement("div",{className:"email-payslip-attachment"},r.a.createElement("span",null),"File attached:",r.a.createElement("p",null,"Payslip for ",c," - ",a||"[salary period]"))),r.a.createElement("div",{className:"email-payslip-footer"},r.a.createElement("button",{onClick:R,className:"button send-email-button ".concat(o&&"disabled"),disabled:o},y?r.a.createElement("span",{className:"spinner"},"\xa0"):"Send email"))))}))};a(430);var De=function(e){var t=new URLSearchParams(Object(s.g)().search).get("recipient");return r.a.createElement(n.Fragment,null,r.a.createElement(d,{title:"Email payslip"}),r.a.createElement("div",{className:"email-sent"},r.a.createElement("div",{className:"email-sent-text"},r.a.createElement("h2",null,"Done!"),r.a.createElement("p",null,"Your email was sent to ",t,".")),r.a.createElement("div",{className:"email-sent-actions"},r.a.createElement(o.b,{to:"/payslip/new/",className:"button"},"Create another pay slip"),r.a.createElement(o.b,{to:"/home",className:"button"},"Back to home page"))))},Re=(a(431),function(){return r.a.createElement(n.Fragment,null,r.a.createElement(d,{title:"Privacy Policy",disableBackButton:!0}),r.a.createElement("div",{className:"privacy-policy"},r.a.createElement("p",null,"Your privacy is important to us. It is Magpay's policy to respect your privacy regarding any information we may collect from you across our website, ",r.a.createElement("a",{href:"https://magpay.herokuapp.com/"},"https://magpay.herokuapp.com"),", and other sites we own and operate."),r.a.createElement("p",null,"We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why we\u2019re collecting it and how it will be used."),r.a.createElement("p",null,"We only retain collected information for as long as necessary to provide you with your requested service. What data we store, we\u2019ll protect within commercially acceptable means to prevent loss and theft, as well as unauthorised access, disclosure, copying, use or modification."),r.a.createElement("p",null,"We don\u2019t share any personally identifying information publicly or with third-parties, except when required to by law."),r.a.createElement("p",null,"Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies."),r.a.createElement("p",null,"You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services."),r.a.createElement("p",null,"Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us."),r.a.createElement("p",null,"This policy is effective as of 1 January 2020.")))}),Me=a(71),ze=a.n(Me),He=a(89),qe=a.n(He);var Je={userId:void 0,loggedIn:void 0},Ye=Object(n.createContext)(Je),_e=Ye.Provider,$e=Ye.Consumer,Ke=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(B.a)(this,Object(G.a)(t).call(this,e))).state=Object(x.a)({},Je),a.logUserOut=a.logUserOut.bind(Object(T.a)(a)),a.logUserIn=a.logUserIn.bind(Object(T.a)(a)),a}return Object(L.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.setInitialData()}},{key:"setInitialData",value:function(){var e,t,a;return ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=this.props.cookieLoggedInIdentifier,n.next=4,ze.a.awrap(Promise.all(["1"===qe.a.get(e)?this.fetchProfile():void 0]));case 4:t=n.sent,a=t.id,this.setUserLoggedIn(a),this.setState({userId:a}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r=new Error("SessionContext initial data set failed ".concat(n.t0)),console.error(r);case 13:case"end":return n.stop()}var r}),null,this,[[0,10]])}},{key:"fetchProfile",value:function(){return ze.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:"mabel"});case 1:case"end":return e.stop()}}))}},{key:"setUserLoggedIn",value:function(e){var t,a,n,r,l,i,o;return ze.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=this.props,a=t.cookieLoggedInIdentifier,n=t.cookieLoggedInExpireDays,r=t.cookieUserIdIdentifier,l=t.cookieUserIdExpireDays,e?(qe.a.set(r,e,{expires:l}),qe.a.set(a,"1",{expires:n})):(qe.a.remove(r),qe.a.remove(a)),c.next=4,ze.a.awrap(fetch("".concat("/api","/logincheck")).then((function(e){return e.json()})));case 4:i=c.sent,o=i.success,this.setState({loggedIn:o});case 7:case"end":return c.stop()}}),null,this)}},{key:"logUserIn",value:function(e){var t=this;return new Promise((function(a){t.setUserLoggedIn(e),t.setState({userId:e},a)}))}},{key:"logUserOut",value:function(){var e=this;return new Promise((function(t){e.setState(Je),e.setUserLoggedIn(void 0),t()}))}},{key:"render",value:function(){var e=this.props.children,t=this.state,a={userId:t.userId,loggedIn:t.loggedIn,logUserOut:this.logUserOut,logUserIn:this.logUserIn};return r.a.createElement(_e,{value:Object(x.a)({},a)},e)}}]),t}(n.Component),Xe=function(e){var t=e.children,a=e.loggedIn,n=Object(c.a)(e,["children","loggedIn"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){var n=e.location;return a?t:r.a.createElement(s.a,{to:{pathname:"/",state:{from:n}},push:!0})}}))},Qe=function(){return r.a.createElement(M,null,r.a.createElement($e,null,(function(e){var t=e.loggedIn;return console.log(t),void 0!==t&&r.a.createElement(n.Fragment,null,r.a.createElement(s.b,{path:"/",exact:!0,component:b}),r.a.createElement(Xe,{path:"/home",loggedIn:t},r.a.createElement(p,null)),r.a.createElement(Xe,{path:"/payslip/new",loggedIn:t},r.a.createElement(K,null)),r.a.createElement(Xe,{path:"/payslip/preview",loggedIn:t},r.a.createElement(X,null)),r.a.createElement(Xe,{path:"/payslip/email",loggedIn:t},r.a.createElement(Ve,null)),r.a.createElement(Xe,{path:"/payslip/sent",loggedIn:t},r.a.createElement(De,null)),r.a.createElement(s.b,{path:"/privacy",component:Re}))})))},Ze=function(){var e={cookieLoggedInIdentifier:"magbelle_logged_in",cookieLoggedInExpireDays:30,cookieUserIdIdentifier:"magbelle_user_id",cookieUserIdExpireDays:30};return r.a.createElement(Ke,e,r.a.createElement(o.a,null,r.a.createElement(Qe,null)))};i.a.render(r.a.createElement(Ze,null),document.getElementById("root"))},73:function(e,t,a){}},[[238,1,2]]]);
//# sourceMappingURL=main.fd129bd5.chunk.js.map